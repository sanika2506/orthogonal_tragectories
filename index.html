<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family of Curves Orthogonal Trajectories</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 5px solid #26d0ce;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .content {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 30px;
            padding: 30px;
        }
        
        @media (max-width: 1100px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .control-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }
        
        .graph-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }
        
        .panel-title {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #26d0ce;
            font-size: 1.3rem;
        }
        
        .curve-family-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .family-btn {
            padding: 15px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .family-btn:hover {
            border-color: #26d0ce;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(38, 208, 206, 0.2);
        }
        
        .family-btn.active {
            background: linear-gradient(135deg, #26d0ce, #1a2980);
            color: white;
            border-color: #1a2980;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #26d0ce;
            box-shadow: 0 0 0 3px rgba(38, 208, 206, 0.2);
        }
        
        .sequence-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #1a2980;
        }
        
        .sequence-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .sequence-values {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .sequence-value {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .calculate-btn {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            margin-top: 25px;
            transition: all 0.3s;
        }
        
        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(26, 41, 128, 0.3);
        }
        
        .graph-container {
            height: 400px;
            background: white;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 20px;
            height: 10px;
            border-radius: 2px;
        }
        
        .results-panel {
            background: #f8f9fa;
            padding: 30px;
            margin-top: 30px;
            border-radius: 15px;
            border: 2px solid #e0e0e0;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #26d0ce;
        }
        
        .result-title {
            color: #1a2980;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .result-content {
            font-family: 'Courier New', monospace;
            color: #2c3e50;
            line-height: 1.6;
        }
        
        .info-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #d1e7f7 100%);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #3498db;
        }
        
        .parameter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .param-input {
            display: flex;
            flex-direction: column;
        }
        
        .param-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .family-description {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Family of Curves Orthogonal Trajectories</h1>
            <p class="subtitle">Visualize multiple families of curves with their orthogonal trajectories. Generate sequences of curves and see how they intersect at right angles.</p>
        </div>
        
        <div class="content">
            <div class="control-panel">
                <h2 class="panel-title">Select Curve Family</h2>
                
                <div class="curve-family-selector" id="familySelector">
                    <button class="family-btn active" data-family="circle">
                        Circle Family<br>
                        <span class="family-description">x² + y² = C</span>
                    </button>
                    <button class="family-btn" data-family="parabola">
                        Parabola Family<br>
                        <span class="family-description">y = Cx²</span>
                    </button>
                    <button class="family-btn" data-family="ellipse">
                        Ellipse Family<br>
                        <span class="family-description">x²/a² + y²/b² = C</span>
                    </button>
                    <button class="family-btn" data-family="hyperbola">
                        Hyperbola Family<br>
                        <span class="family-description">xy = C</span>
                    </button>
                    <button class="family-btn" data-family="line">
                        Line Family<br>
                        <span class="family-description">y = Cx</span>
                    </button>
                    <button class="family-btn" data-family="exponential">
                        Exponential Family<br>
                        <span class="family-description">y = Ceˣ</span>
                    </button>
                </div>
                
                <div class="input-group">
                    <label for="numCurves">Number of Curves in Family:</label>
                    <input type="range" id="numCurves" min="3" max="15" value="7">
                    <div style="text-align: center; margin-top: 5px;">
                        <span id="numCurvesValue">7 curves</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="sequenceType">Sequence Type:</label>
                    <select id="sequenceType">
                        <option value="arithmetic">Arithmetic Sequence (C = a + (n-1)d)</option>
                        <option value="geometric">Geometric Sequence (C = a·rⁿ⁻¹)</option>
                        <option value="square">Square Numbers (C = n²)</option>
                        <option value="fibonacci">Fibonacci-like Sequence</option>
                        <option value="custom">Custom Sequence</option>
                    </select>
                </div>
                
                <div class="parameter-grid">
                    <div class="param-input">
                        <span class="param-label">Start Value (a):</span>
                        <input type="number" id="startValue" value="1" step="0.1">
                    </div>
                    <div class="param-input">
                        <span class="param-label">Difference/Ratio (d/r):</span>
                        <input type="number" id="stepValue" value="1" step="0.1">
                    </div>
                </div>
                
                <div class="sequence-section">
                    <div class="sequence-title">Family Parameter Sequence (C values):</div>
                    <div class="sequence-values" id="sequenceValues">
                        <!-- Sequence values will be generated here -->
                    </div>
                </div>
                
                <button class="calculate-btn" id="calculateBtn">
                    Generate Family & Orthogonal Trajectories
                </button>
                
                <div class="info-box">
                    <p><strong>How it works:</strong> For each curve in the family (different C values), we calculate orthogonal trajectories. The sequence defines the parameter values C for the family of curves.</p>
                </div>
            </div>
            
            <div class="graph-panel">
                <h2 class="panel-title">Visualization</h2>
                <div class="graph-container">
                    <canvas id="trajectoryChart"></canvas>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #1a2980;"></div>
                        <span>Family of Curves (different C values)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #26d0ce;"></div>
                        <span>Orthogonal Trajectories</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="results-panel">
            <h2 class="panel-title">Results & Mathematical Analysis</h2>
            
            <div class="results-grid">
                <div class="result-box">
                    <div class="result-title">Selected Family:</div>
                    <div class="result-content" id="selectedFamily">Circle Family: x² + y² = C</div>
                </div>
                
                <div class="result-box">
                    <div class="result-title">Parameter Sequence:</div>
                    <div class="result-content" id="sequenceInfo">Arithmetic: C = 1, 2, 3, 4, 5, 6, 7</div>
                </div>
                
                <div class="result-box">
                    <div class="result-title">Orthogonal Trajectories:</div>
                    <div class="result-content" id="orthogonalEquation">y = Kx (lines through origin)</div>
                </div>
                
                <div class="result-box">
                    <div class="result-title">Mathematical Derivation:</div>
                    <div class="result-content" id="derivation">
                        1. Family: x² + y² = C<br>
                        2. Differentiate: 2x + 2y(dy/dx) = 0<br>
                        3. Slope: dy/dx = -x/y<br>
                        4. Orthogonal slope: y/x<br>
                        5. Solution: y = Kx
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const familyButtons = document.querySelectorAll('.family-btn');
        const numCurvesSlider = document.getElementById('numCurves');
        const numCurvesValue = document.getElementById('numCurvesValue');
        const sequenceType = document.getElementById('sequenceType');
        const startValueInput = document.getElementById('startValue');
        const stepValueInput = document.getElementById('stepValue');
        const sequenceValuesDiv = document.getElementById('sequenceValues');
        const calculateBtn = document.getElementById('calculateBtn');
        const selectedFamily = document.getElementById('selectedFamily');
        const sequenceInfo = document.getElementById('sequenceInfo');
        const orthogonalEquation = document.getElementById('orthogonalEquation');
        const derivation = document.getElementById('derivation');
        
        // Chart variables
        let trajectoryChart;
        let currentFamily = 'circle';
        let sequenceValues = [];
        
        // Initialize Chart.js
        function initChart() {
            const ctx = document.getElementById('trajectoryChart').getContext('2d');
            
            if (trajectoryChart) {
                trajectoryChart.destroy();
            }
            
            trajectoryChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Family of Curves',
                            data: [],
                            backgroundColor: '#1a2980',
                            borderColor: '#1a2980',
                            pointRadius: 0,
                            borderWidth: 2,
                            showLine: true,
                            fill: false
                        },
                        {
                            label: 'Orthogonal Trajectories',
                            data: [],
                            backgroundColor: '#26d0ce',
                            borderColor: '#26d0ce',
                            pointRadius: 0,
                            borderWidth: 2,
                            showLine: true,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'x-axis',
                                font: { size: 14, weight: 'bold' }
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' },
                            min: -10,
                            max: 10
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'y-axis',
                                font: { size: 14, weight: 'bold' }
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' },
                            min: -10,
                            max: 10
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                }
            });
        }
        
        // Set up family buttons
        familyButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                familyButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFamily = this.dataset.family;
                generateSequence();
                updateChart();
            });
        });
        
        // Set up event listeners
        numCurvesSlider.addEventListener('input', function() {
            numCurvesValue.textContent = `${this.value} curves`;
            generateSequence();
        });
        
        sequenceType.addEventListener('change', generateSequence);
        startValueInput.addEventListener('input', generateSequence);
        stepValueInput.addEventListener('input', generateSequence);
        calculateBtn.addEventListener('click', updateChart);
        
        // Generate sequence based on selected type
        function generateSequence() {
            const numCurves = parseInt(numCurvesSlider.value);
            const start = parseFloat(startValueInput.value);
            const step = parseFloat(stepValueInput.value);
            const type = sequenceType.value;
            
            sequenceValues = [];
            
            switch(type) {
                case 'arithmetic':
                    for (let i = 0; i < numCurves; i++) {
                        sequenceValues.push(start + i * step);
                    }
                    sequenceInfo.textContent = `Arithmetic: C = ${sequenceValues.join(', ')}`;
                    break;
                    
                case 'geometric':
                    for (let i = 0; i < numCurves; i++) {
                        sequenceValues.push(start * Math.pow(step, i));
                    }
                    sequenceInfo.textContent = `Geometric: C = ${sequenceValues.join(', ')}`;
                    break;
                    
                case 'square':
                    for (let i = 1; i <= numCurves; i++) {
                        sequenceValues.push(i * i);
                    }
                    sequenceInfo.textContent = `Squares: C = ${sequenceValues.join(', ')}`;
                    break;
                    
                case 'fibonacci':
                    sequenceValues = [start, step];
                    for (let i = 2; i < numCurves; i++) {
                        sequenceValues.push(sequenceValues[i-1] + sequenceValues[i-2]);
                    }
                    sequenceInfo.textContent = `Fibonacci-like: C = ${sequenceValues.join(', ')}`;
                    break;
                    
                case 'custom':
                    // Default to arithmetic for custom
                    for (let i = 0; i < numCurves; i++) {
                        sequenceValues.push(start + i * step);
                    }
                    sequenceInfo.textContent = `Custom: C = ${sequenceValues.join(', ')}`;
                    break;
            }
            
            // Update sequence display
            updateSequenceDisplay();
        }
        
        // Update sequence values display
        function updateSequenceDisplay() {
            sequenceValuesDiv.innerHTML = '';
            sequenceValues.forEach((value, index) => {
                const div = document.createElement('div');
                div.className = 'sequence-value';
                div.textContent = value.toFixed(1);
                sequenceValuesDiv.appendChild(div);
            });
        }
        
        // Generate curve data based on family type
        function generateCurveData() {
            const curveData = [];
            const orthogonalData = [];
            
            switch(currentFamily) {
                case 'circle':
                    selectedFamily.textContent = 'Circle Family: x² + y² = C';
                    orthogonalEquation.textContent = 'y = Kx (lines through origin)';
                    derivation.innerHTML = `
                        1. Family: x² + y² = C<br>
                        2. Differentiate: 2x + 2y(dy/dx) = 0<br>
                        3. Slope: dy/dx = -x/y<br>
                        4. Orthogonal slope: y/x<br>
                        5. Solution: y = Kx
                    `;
                    
                    // Generate circles
                    sequenceValues.forEach(C => {
                        const r = Math.sqrt(C);
                        const points = [];
                        for (let theta = 0; theta <= 2 * Math.PI; theta += 0.1) {
                            points.push({
                                x: r * Math.cos(theta),
                                y: r * Math.sin(theta)
                            });
                        }
                        curveData.push(...points);
                        curveData.push({x: NaN, y: NaN}); // Break between circles
                    });
                    
                    // Generate orthogonal lines (through origin)
                    for (let i = 0; i < 12; i++) {
                        const angle = (i * Math.PI) / 12;
                        const points = [];
                        for (let t = -8; t <= 8; t += 0.5) {
                            points.push({
                                x: t * Math.cos(angle),
                                y: t * Math.sin(angle)
                            });
                        }
                        orthogonalData.push(...points);
                        orthogonalData.push({x: NaN, y: NaN});
                    }
                    break;
                    
                case 'parabola':
                    selectedFamily.textContent = 'Parabola Family: y = Cx²';
                    orthogonalEquation.textContent = 'y = -(1/(2C)) ln|x| + K';
                    derivation.innerHTML = `
                        1. Family: y = Cx²<br>
                        2. Differentiate: dy/dx = 2Cx<br>
                        3. Orthogonal slope: -1/(2Cx)<br>
                        4. Solve: dy = -1/(2Cx) dx<br>
                        5. Solution: y = -(1/(2C)) ln|x| + K
                    `;
                    
                    // Generate parabolas
                    sequenceValues.forEach(C => {
                        const points = [];
                        for (let x = -4; x <= 4; x += 0.2) {
                            points.push({
                                x: x,
                                y: C * x * x
                            });
                        }
                        curveData.push(...points);
                        curveData.push({x: NaN, y: NaN});
                    });
                    
                    // Generate orthogonal logarithmic curves
                    for (let k = -3; k <= 3; k += 1) {
                        const points = [];
                        for (let x = -3; x <= 3; x += 0.2) {
                            if (Math.abs(x) > 0.2) {
                                points.push({
                                    x: x,
                                    y: -Math.log(Math.abs(x)) / (2 * sequenceValues[0]) + k
                                });
                            }
                        }
                        orthogonalData.push(...points);
                        orthogonalData.push({x: NaN, y: NaN});
                    }
                    break;
                    
                case 'ellipse':
                    selectedFamily.textContent = 'Ellipse Family: x²/a² + y²/b² = C';
                    orthogonalEquation.textContent = 'y = Kx^(±b²/a²)';
                    derivation.innerHTML = `
                        1. Family: x²/a² + y²/b² = C<br>
                        2. Differentiate: 2x/a² + (2y/b²)(dy/dx) = 0<br>
                        3. Slope: dy/dx = -(b²x)/(a²y)<br>
                        4. Orthogonal slope: (a²y)/(b²x)<br>
                        5. Solution: y = Kx^(±b²/a²)
                    `;
                    
                    // Generate ellipses
                    const a = 2, b = 3;
                    sequenceValues.forEach(C => {
                        const points = [];
                        for (let theta = 0; theta <= 2 * Math.PI; theta += 0.1) {
                            points.push({
                                x: a * Math.sqrt(C) * Math.cos(theta),
                                y: b * Math.sqrt(C) * Math.sin(theta)
                            });
                        }
                        curveData.push(...points);
                        curveData.push({x: NaN, y: NaN});
                    });
                    
                    // Generate orthogonal power curves
                    const power = (b*b)/(a*a);
                    for (let k = -2; k <= 2; k += 0.5) {
                        const points = [];
                        for (let x = -3; x <= 3; x += 0.2) {
                            if (Math.abs(x) > 0.1) {
                                const y = k * Math.pow(Math.abs(x), power) * Math.sign(x);
                                points.push({x, y});
                            }
                        }
                        orthogonalData.push(...points);
                        orthogonalData.push({x: NaN, y: NaN});
                    }
                    break;
                    
                case 'hyperbola':
                    selectedFamily.textContent = 'Hyperbola Family: xy = C';
                    orthogonalEquation.textContent = 'x² - y² = K';
                    derivation.innerHTML = `
                        1. Family: xy = C<br>
                        2. Differentiate: y + x(dy/dx) = 0<br>
                        3. Slope: dy/dx = -y/x<br>
                        4. Orthogonal slope: x/y<br>
                        5. Solve: x dx - y dy = 0<br>
                        6. Solution: x² - y² = K
                    `;
                    
                    // Generate hyperbolas
                    sequenceValues.forEach(C => {
                        const points1 = [];
                        const points2 = [];
                        
                        // Right branch
                        for (let x = 0.3; x <= 5; x += 0.2) {
                            points1.push({x, y: C/x});
                        }
                        
                        // Left branch
                        for (let x = -0.3; x >= -5; x -= 0.2) {
                            points2.push({x, y: C/x});
                        }
                        
                        curveData.push(...points1);
                        curveData.push({x: NaN, y: NaN});
                        curveData.push(...points2);
                        curveData.push({x: NaN, y: NaN});
                    });
                    
                    // Generate orthogonal hyperbolas (rotated 45°)
                    for (let k = -4; k <= 4; k += 1) {
                        const points = [];
                        for (let x = -4; x <= 4; x += 0.2) {
                            const y = Math.sqrt(x*x + k);
                            points.push({x, y});
                            points.push({x, y: -y});
                        }
                        orthogonalData.push(...points);
                        orthogonalData.push({x: NaN, y: NaN});
                    }
                    break;
                    
                case 'line':
                    selectedFamily.textContent = 'Line Family: y = Cx';
                    orthogonalEquation.textContent = 'x² + y² = K';
                    derivation.innerHTML = `
                        1. Family: y = Cx<br>
                        2. Differentiate: dy/dx = C<br>
                        3. Orthogonal slope: -1/C<br>
                        4. Solution: Lines perpendicular to y = Cx<br>
                        5. Orthogonal family: Concentric circles
                    `;
                    
                    // Generate lines through origin
                    sequenceValues.forEach(C => {
                        const points = [];
                        for (let x = -6; x <= 6; x += 0.2) {
                            points.push({
                                x: x,
                                y: C * x
                            });
                        }
                        curveData.push(...points);
                        curveData.push({x: NaN, y: NaN});
                    });
                    
                    // Generate orthogonal circles
                    for (let r = 1; r <= 5; r++) {
                        const points = [];
                        for (let theta = 0; theta <= 2 * Math.PI; theta += 0.1) {
                            points.push({
                                x: r * Math.cos(theta),
                                y: r * Math.sin(theta)
                            });
                        }
                        orthogonalData.push(...points);
                        orthogonalData.push({x: NaN, y: NaN});
                    }
                    break;
                    
                case 'exponential':
                    selectedFamily.textContent = 'Exponential Family: y = Ceˣ';
                    orthogonalEquation.textContent = 'y = -e⁻ˣ/C + K';
                    derivation.innerHTML = `
                        1. Family: y = Ceˣ<br>
                        2. Differentiate: dy/dx = Ceˣ = y<br>
                        3. Orthogonal slope: -1/y<br>
                        4. Solve: y dy = -dx<br>
                        5. Solution: y²/2 = -x + K
                    `;
                    
                    // Generate exponential curves
                    sequenceValues.forEach(C => {
                        const points = [];
                        for (let x = -3; x <= 2; x += 0.2) {
                            points.push({
                                x: x,
                                y: C * Math.exp(x)
                            });
                        }
                        curveData.push(...points);
                        curveData.push({x: NaN, y: NaN});
                    });
                    
                    // Generate orthogonal curves
                    for (let k = -3; k <= 3; k++) {
                        const points = [];
                        for (let x = -3; x <= 2; x += 0.2) {
                            points.push({
                                x: x,
                                y: Math.sqrt(2 * (-x + k))
                            });
                        }
                        orthogonalData.push(...points);
                        orthogonalData.push({x: NaN, y: NaN});
                    }
                    break;
            }
            
            return { curveData, orthogonalData };
        }
        
        // Update chart with new data
        function updateChart() {
            generateSequence();
            initChart();
            
            const data = generateCurveData();
            trajectoryChart.data.datasets[0].data = data.curveData;
            trajectoryChart.data.datasets[1].data = data.orthogonalData;
            trajectoryChart.update();
        }
        
        // Initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            initChart();
            generateSequence();
            updateChart();
        });
    </script>
</body>
</html>
